<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-AU">
  <head>
   <link rel="openid.server" href="http://www.livejournal.com/openid/server.bml" />
   <link rel="openid.delegate" href="http://paulproteus.livejournal.com/" />
    <meta http-equiv="content-type" content="application/xhtml+xml; charset=UTF-8" />
    <meta name="author" content="root"/>
    <meta name="generator" content="Bluefish 1.0.4"/>
    <link rel="alternate" type="application/atom+xml" 
    href="http://asheesh.org/index.atom" />

    <!-- Navigational metadata for large websites (an accessibility feature): -->
    <link rel="top"      href="./index.html" title="Homepage" />
    <link rel="up"       href="./index.html" title="Up" />
    <link rel="first"    href="./index.html" title="First page" />
    <link rel="previous" href="./index.html" title="Previous page" />
    <link rel="next"     href="./index.html" title="Next page" />
    <link rel="last"     href="./index.html" title="Last page" />
    <link rel="toc"      href="./index.html" title="Table of contents" />
    <link rel="index"    href="./index.html" title="Site map" />

<!-- Change the path to your .css file. This should reflect the weblocation -->
    <link rel="stylesheet" type="text/css" href="/html.flav/gila-screen.css" media="screen" title="Gila (screen)" />
    <link rel="stylesheet" type="text/css" href="/html.flav/gila-print.css" media="print" />
	
	<!--  title is pulled from blosxom -->
    <title></title>
  </head>

  <body>
    <!-- For non-visual user agents: -->
      <div id="top"><a href="#main-copy" class="doNotDisplay doNotPrint">Skip to main content.</a></div>

    <!-- ##### Header ##### -->

    <div id="header">
      <h1 class="headerTitle">
     <!-- again the global variables are pulled from blosxom -->
        <a href="/" title="Browse to homepage">Asheeshworld <span>where are you?</span></a>
      </h1>

      <div class="subHeader">
        <span class="doNotDisplay">Navigation: </span>
        <!-- change or add the following links to represent what you want -->
        <a href="/about/">About</a> |
        <a href="/mmm/">Mmm</a> |
	<a href="/note/">Notes</a> |
        <a href="/rmad/">RMAD</a> |
        <a href="/dwad/">DWAD</a> |
        <a href="/scribble/">Scribbles</a> |
        <a href="/projects/">Projects</a>
      </div>
    </div>
    <div id="side-bar">

      <!-- ##### Left Sidebar ##### -->
	<!-- If you want to use the Blosxom Plugin "menu" by Fletcher T. Penney, leave this area alone... put the menu file in your plugins dir-->
      <div class="leftSideBar">
        <p class="sideBarTitle">Menu</p>
        <ul>
          <li><a href="/">Home</a></li>
          <li></li>
        </ul>  
        <p class="sideBarTitle">This section</p> 
         <ul><li>Why are you here?</li></ul>
   
        <p class="sideBarTitle">Recycling the past</p>
        <span class="sideBarText">
          
        </span>

        <p class="sideBarTitle">Comments</p>
        <span class="sideBarText">
          Comments are welcome.  Email me.
        </span>
      </div>

	<!-- if you want to manually set up your menus.. commnet above .. and uncomment the following and manipulate to your liking. -->
	<!--
      <div class="leftSideBar">
        <p class="sideBarTitle">This Page</p>
        <ul>
          <li><a href="#introduction">Introduction</a></li>
          <li><a href="#cross-browser" title="Improved cross-browser compatibility">Cross-browser</a></li>
          <li><a href="#stylesheets" title="Modified stylesheets">Stylesheets</a></li>
          <li><a href="#accessibility" title="Improved accessibility">Accessibility</a></li>
        </ul>

        <p class="sideBarTitle">Branch Navigation</p>
        <ul>
          <li><a href="http://www.oswd.org/index.phtml">OSWD Home</a></li>
          <li><a href="http://www.oswd.org/browse.php">Browse Designs</a></li>
          <li><a href="http://www.oswd.org/userinfo.phtml?user=haran">haran&rsquo;s Designs</a></li>
          <li><span class="thisPage" title="That's this page!">Gila Homepage</span></li>
        </ul>

        <p class="sideBarTitle">Comments</p>
        <span class="sideBarText">
          Comments and constructive criticisms are welcome
          <a href="http://www.oswd.org/email.phtml?user=haran" title="Email form">via email</a>.
        </span>
      </div>
	-->


      <!-- ##### Right Sidebar ##### 

      <div class="rightSideBar">
        

        <p class="sideBarTitle">Downloads</p>

        <div class="sideBarText"><strong>"Gila" Skin for Blosxom</strong><br />

      </div>
      -->

    </div>  
         <div id="main-copy">
        <!-- <h1 id="introduction" style="border-top: none; padding-top: 0;"></h1>
       </div>
       -->
<h2>Fri, 01 Jan 2010</h2>
       <h1 id="cross-browser" style="border-top: none; padding-top: 0; padding-bottom: 0;">
        <a href="http://www.asheesh.org/scribble/net/quassel-quotes.html">Quassel quotes
</a>
       </h1>
		<p>I'm trying the <a href="http://quassel-irc.org/">Quassel</a> IRC chat client.
It has some nice features, like showing me a "Chat Monitor" of all
my channels.
</p>
<blockquote>
&lt;Encyclopedia Dramatica:#wp80:KittyLoaf&gt; oh no nipples <br />
&lt;Freenode:#noisebridge:synack-&gt; lame <br />
&lt;Freenode:#python:nosklo&gt; kblessinggr: no, I mean web servers
</blockquote>
<p>It's like could standing in three rooms at once of a party and snickering
at the juxtaposition of conversation.
</p>
		<p style="text-align: right;">
		<i>[<a href="/scribble/net">/scribble/net</a>] 
		<a href="http://www.asheesh.org/scribble/net/quassel-quotes.html">permanent link and comments</a></i>
		</p>
    
       <h1 id="cross-browser" style="border-top: none; padding-top: 0; padding-bottom: 0;">
        <a href="http://www.asheesh.org/note/debian/detecting-stale-wordpress.html">Detecting stale versions of WordPress
</a>
       </h1>
		<p>I run a
<a href="http://rose.makesad.us/">personal server</a> that hosts web space for a few friends.
Probably the most popular thing to do with the space is to install WordPress and
run a personal blog.
</p><p>A few days ago, I discovered some attackers were abusing one of the sites.
Once we upgraded the site to the latest version of WordPress, the attack went away.
So I wrote a tool that, every night, emails me a report of the locations of old versions
of WordPress. A sample email:
</p>
<blockquote>
<b>Current version of WordPress: 2.9</b><br />
<br />
<b>oldroommate has WordPress 2.5 in /home/oldroommate/web/oldroommate.com/</b>
</blockquote>
<p>Eek! WordPress 2.5 is old!
</p>
<h3 id="w_how-it-works">How it works</h3>
<p>Each time it runs, it looks at <a href="http://wordpress.org/download/">wordpress.org</a>
to see what the current version is. The code to do that is written in Python and uses lxml.html.
It prints the current version in the report, and it uses it when analyzing WordPress installs.
</p><p>To analyze WordPress installs, it executes <i>locate readme.html</i>, looking for WordPress's tell-tale documentation file. For every 
such readme.html, if it matches a simple regular expression suggesting it's a WordPress readme file, it performs
the following analysis:
</p>
<ul><li> It does some simple <i>sed</i>ing and <i>grep</i>ing looking for the version of WordPress described by that file.
</li><li> If the version detected is older (as calculated by dpkg --compare-versions), it creates a one-line report like the one above about oldroommate.
</li></ul>
<p>If it found any installs of old WordPress, it prints a report like the one blockquoted above to stdout.
</p>
<h3 id="w_how-to-use-it">How to use it</h3>
<p>To get emails, I run it with cron. You can add a stanza like this to your crontab (edit it with <i>crontab -e</i>):
</p>
<blockquote>
@daily cd find-out-of-date-wordpress; ./look.sh
</blockquote>
<p>Ta-da, nightly reports.
</p>
<h3 id="w_to-get-a-copy">To get a copy</h3>
<p>Do a git clone:
<pre>git clone git://git.asheesh.org/find-out-of-date-wordpress.git
</pre>
<p>or browse its <a href="http://git.asheesh.org/?p=find-out-of-date-wordpress.git;a=summary">gitweb</a>.
</p>
<h3 id="w_feedback">Feedback</h3>
<p>I'm quite interested to hear what others do to avoid old web apps being attacked. If there's another bit of software
that monitors web apps for needing upgrades, I'd love to hear about it! Obviously if you have feedback on this
tidbit I wrote, let me know.
</p><p>(To me, apt-get doesn't seem to be the answer. Web apps (especially PHP ones) don't usually seem to support
keeping the code in one place with multiple different configuration files. And users get excited about the
latest and greatest and don't want to wait for me to upgrade, and I can't blame them.)
</p><p>If some of you don't like the Python dependency or anything else, I do welcome patches!
</p>
		<p style="text-align: right;">
		<i>[<a href="/note/debian">/note/debian</a>] 
		<a href="http://www.asheesh.org/note/debian/detecting-stale-wordpress.html">permanent link and comments</a></i>
		</p>
    
</div> <!-- end main copy div  -->
    <!-- ##### Footer ##### -->

    <div id="footer">
      <div class="doNotPrint">
<a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">
<img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-sa/3.0/80x15.png" />
</a>
      </div>

      <div>
        Copyright &copy; <a href="http://www.asheesh.org/">Asheesh Laroia</a>.  This work is licensed under a 
<a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">by-sa</a>. <a href="http://www.openhatch.org/">Open Hatch</a> is my current project. You should enjoy my parents' <a href="http://amayabarandgrill.com/">Indian restaurant in Rochester</a>!
      </div>
    </div>
  </body>
</html>
