<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-AU">
  <head>
   <link rel="openid.server" href="http://www.livejournal.com/openid/server.bml" />
   <link rel="openid.delegate" href="http://paulproteus.livejournal.com/" />
    <meta http-equiv="content-type" content="application/xhtml+xml; charset=UTF-8" />
    <meta name="author" content="root"/>
    <meta name="generator" content="Bluefish 1.0.4"/>
    <link rel="alternate" type="application/atom+xml" 
    href="http://asheesh.org/index.atom" />

    <!-- Navigational metadata for large websites (an accessibility feature): -->
    <link rel="top"      href="./index.html" title="Homepage" />
    <link rel="up"       href="./index.html" title="Up" />
    <link rel="first"    href="./index.html" title="First page" />
    <link rel="previous" href="./index.html" title="Previous page" />
    <link rel="next"     href="./index.html" title="Next page" />
    <link rel="last"     href="./index.html" title="Last page" />
    <link rel="toc"      href="./index.html" title="Table of contents" />
    <link rel="index"    href="./index.html" title="Site map" />

<!-- Change the path to your .css file. This should reflect the weblocation -->
    <link rel="stylesheet" type="text/css" href="/html.flav/gila-screen.css" media="screen" title="Gila (screen)" />
    <link rel="stylesheet" type="text/css" href="/html.flav/gila-print.css" media="print" />
	
	<!--  title is pulled from blosxom -->
    <title></title>
  </head>

  <body>
    <!-- For non-visual user agents: -->
      <div id="top"><a href="#main-copy" class="doNotDisplay doNotPrint">Skip to main content.</a></div>

    <!-- ##### Header ##### -->

    <div id="header">
      <h1 class="headerTitle">
     <!-- again the global variables are pulled from blosxom -->
        <a href="/" title="Browse to homepage">Asheeshworld <span>where are you?</span></a>
      </h1>

      <div class="subHeader">
        <span class="doNotDisplay">Navigation: </span>
        <!-- change or add the following links to represent what you want -->
        <a href="/about/">About</a> |
        <a href="/mmm/">Mmm</a> |
	<a href="/note/">Notes</a> |
        <a href="/rmad/">RMAD</a> |
        <a href="/dwad/">DWAD</a> |
        <a href="/scribble/">Scribbles</a> |
        <a href="/projects/">Projects</a>
      </div>
    </div>
    <div id="side-bar">

      <!-- ##### Left Sidebar ##### -->
	<!-- If you want to use the Blosxom Plugin "menu" by Fletcher T. Penney, leave this area alone... put the menu file in your plugins dir-->
      <div class="leftSideBar">
        <p class="sideBarTitle">Menu</p>
        <ul>
          <li><a href="/">Home</a></li>
          <li></li>
        </ul>  
        <p class="sideBarTitle">This section</p> 
         <ul><li>Why are you here?</li></ul>
   
        <p class="sideBarTitle">Recycling the past</p>
        <span class="sideBarText">
          
        </span>

        <p class="sideBarTitle">Comments</p>
        <span class="sideBarText">
          Comments are welcome.  Email me.
        </span>
      </div>

	<!-- if you want to manually set up your menus.. commnet above .. and uncomment the following and manipulate to your liking. -->
	<!--
      <div class="leftSideBar">
        <p class="sideBarTitle">This Page</p>
        <ul>
          <li><a href="#introduction">Introduction</a></li>
          <li><a href="#cross-browser" title="Improved cross-browser compatibility">Cross-browser</a></li>
          <li><a href="#stylesheets" title="Modified stylesheets">Stylesheets</a></li>
          <li><a href="#accessibility" title="Improved accessibility">Accessibility</a></li>
        </ul>

        <p class="sideBarTitle">Branch Navigation</p>
        <ul>
          <li><a href="http://www.oswd.org/index.phtml">OSWD Home</a></li>
          <li><a href="http://www.oswd.org/browse.php">Browse Designs</a></li>
          <li><a href="http://www.oswd.org/userinfo.phtml?user=haran">haran&rsquo;s Designs</a></li>
          <li><span class="thisPage" title="That's this page!">Gila Homepage</span></li>
        </ul>

        <p class="sideBarTitle">Comments</p>
        <span class="sideBarText">
          Comments and constructive criticisms are welcome
          <a href="http://www.oswd.org/email.phtml?user=haran" title="Email form">via email</a>.
        </span>
      </div>
	-->


      <!-- ##### Right Sidebar ##### 

      <div class="rightSideBar">
        

        <p class="sideBarTitle">Downloads</p>

        <div class="sideBarText"><strong>"Gila" Skin for Blosxom</strong><br />

      </div>
      -->

    </div>  
         <div id="main-copy">
        <!-- <h1 id="introduction" style="border-top: none; padding-top: 0;"></h1>
       </div>
       -->
<h2>Mon, 18 Jun 2012</h2>
       <h1 id="cross-browser" style="border-top: none; padding-top: 0; padding-bottom: 0;">
        <a href="http://www.asheesh.org/note/mediawiki/antispam-for-real.html">Antispam recommendations for MediaWiki (that are simple, and actually work, and permit anonymous editing)
</a>
       </h1>
		<p>I've had the honor of working with Will Kahn-Greene at the
<a href="http://pculture.org">Participatory Culture Foundation</a> recently.
He works on the <a href="http://getmiro.com/">Miro desktop video player</a>.
</p><p>He also maintains the PCF's wiki. It runs MediaWiki. It was being spammed
to smithereens. In this screenshot, you see WillKahnGreene's account
deleting files and spam pages created by bots.
</p>
<h3 id="w_before">Before</h3>
<p><img src="http://bluesock.org/~willg/bimages/recent_changes_before.png" />
</p>
<h3 id="w_after">After</h3>
<p>As of about a week ago, all the bots can do is create user accounts. That
means Will doesn't have to go blocking them and deleting the content they uploaded:
</p><p><img src="http://bluesock.org/~willg/bimages/recent_changes_after.png" />
</p>
<h3 id="w_the-exceedingly-simple-antispam-strategy">The exceedingly simple antispam strategy</h3>
<p>You might be wondering how he did it. Here's what it took, in terms of policy:
</p>
<ul><li> Permit anonymous edits to the wiki. (This is essential for <a href="http://c2.com/cgi/wiki?WikiNature">WikiNature</a>.)
</li><li> If you are uploading a file, you must be logged in with an account that has confirmed its email address.
</li><li> If you are adding a new URL to a page, you must be logged in with an account that has confirmed its email address.
</li></ul>
<p>Will had the patience to listen to me and try a few of my ideas, most of which still let some spam through.
</p><p>Then we came up with the idea of 
hacking some changes into the CAPTCHA plugin to enforce the above policy.
MediaWiki has a <a href="http://www.mediawiki.org/wiki/Manual:User_rights">permissions system</a> (they call it "user rights").
We use the user-rights system to restrict file uploads, but
<i>crucially</i> there is no built-in way to restrict who can add URLs.
</p><p>So Will had to write some very simple code that, effectively, adds an
<i>addurl</i> permission to MediaWiki. He did it extending the ConfirmEdit extension.
It's easy to install; you can find
<a href="http://pculture.org/wguaraldi/emailconfirmednoncaptcha/">instructions on his project page</a>.
He wrote <a href="http://bluesock.org/~willg/blog/miro/spam_reduction.html">a blog post about it</a>.
</p><p>As far as I can tell, <i>anyone who runs a public MediaWiki install should configure</i>
the wiki this way<i>.</i>
</p><p>Seriously.
</p><p>If you look at the long, sprawling MediaWiki documentation page about restricting spam,
it contains all sorts of nonsense. Ignore it. Just
<a href="http://pculture.org/wguaraldi/emailconfirmednoncaptcha/">do what Will did</a>.
</p>
		<p style="text-align: right;">
		<i>[<a href="/note/mediawiki">/note/mediawiki</a>] 
		<a href="http://www.asheesh.org/note/mediawiki/antispam-for-real.html">permanent link and comments</a></i>
		</p>
    
</div> <!-- end main copy div  -->
    <!-- ##### Footer ##### -->

    <div id="footer">
      <div class="doNotPrint">
<a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">
<img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-sa/3.0/80x15.png" />
</a>
      </div>

      <div>
        Copyright &copy; <a href="http://www.asheesh.org/">Asheesh Laroia</a>.  This work is licensed under a 
<a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">by-sa</a>. <a href="http://www.openhatch.org/">Open Hatch</a> is my current project. You should enjoy my parents' <a href="http://amayabarandgrill.com/">Indian restaurant in Rochester</a>!
      </div>
    </div>
  </body>
</html>
